# Проект "Мой банк"

## Описание
Проект "Мой банк" - это виджет банковских операций клиента без интерфейса на Python.
Разрабатывается в учебных целях.

В модуле **masks** находятся функции _get_mask_card_number_ и _get_mask_account_, которые возвращают замаскированный номер карты или счета.

В модуле **widget** находятся две функции _mask_account_card_, которая маскирует номер карты или счета и _get_date_, которая возвращает дату в верном формате ДД.ММ.ГГГГ

В модуле **external_api** находится функция _get_amount_, которая принимает на вход транзакцию
и возвращает сумму транзакции в рублях. Если транзакция была не в рублях, происходит обращение к внешнему API для получения текущего курса валют и конвертации суммы операции в рубли. Для конвертации валюты используется Exchange Rates Data API.

В модуле **generators** находится функция _filter_by_currency_, которая находит операции в заданной валюте, функция _transaction_descriptions_, выводящая описания операций из списка. А также функция _card_number_generator_, генерирующая номера банковских карт в заданном 16-значном формате. Все три функции в этом модуле представляют собой итераторы, возвращающие по одному значению за раз с помощью "yield".

В модуле **decorators** находится декоратор в обертке _wrapper_, который логирует время выполнения функции при успешной отработке, а также логирует ошибки.

В модуле *processing* находится функция _filter_by_state_, сортирующая списки со словарями данных по ключу 'state' и _sort_by_date_, которая принимает список словарей и возвращает отсортированный по параметру "date" в порядке убывания список.

В модуле **utils** реализована функция, которая принимает путь до JSON-файла 
и возвращает список словарей с данными о финансовых транзакциях. 
Если файл пустой, содержит не список или не найден, функция возвращает пустой список.

В модуле **csv_reader** реализована функция, которая принимает путь до csv-файла 
и возвращает список словарей с данными о финансовых транзакциях. 
Если файл пустой, не найден или путь некорректен, то функция возвращает пустой список.

В модуле **excel_reader** реализована функция, которая принимает путь до csv-файла 
и возвращает список словарей с данными о финансовых транзакциях. 
Если файл пустой, не найден или путь некорректен, то функция возвращает пустой список.

В модуле **transactions_filter** находится функция _get_searched_transactions_, которая принимает список словарей с данными о банковских операциях и строку поиска,
а возвращает список словарей, у которых в описании есть данная строка. А также функция _get_transactions_count_by_category_, которая принимает список словарей с данными о банковских операциях и список категорий операций,
а возвращает словарь, где ключи — это названия категорий, а значения — это количество операций в каждой категории.

Финальным модулем проекта выступает **main**, в котором реализована функция **main**, отвечающая за основную логику проекта и связывающая функциональности написанных ранее функций между собой.

## Разработка

### Установка
1. Клонируйте репозиторий
```commandline
git clone git@github.com:mariazhiganova/project1.git
```
2. Установите зависимости
```commandline
poetry install
```

### Конфигурационные файлы

В проекте есть файлы конфигурации, в которых находятся переменные для записи в них путей к файлам и других параметров.
В файле **.env.example** хранится API-ключ. Создайте файл .env из копии этого файла и замените значения переменных реальными данными.
В файле **settings** находятся универсальные пути к файлам логирования, а также к файлам с информацией о банковских транзакциях.

### Тестирование 
Проект покрыт юнит-тестами Pytest.

Чтобы запустить тесты с оценкой покрытия выполните команду:
```commandline
poetry run pytest --cov
```
Чтобы сгенерировать отчет о покрытии в HTML-формате, где src — пакет c модулями, которые тестируем. 
Отчет будет сгенерирован в папке htmlcov и храниться в файле с названием index.html:
.
```commandline
pytest --cov=src --cov-report=html
```
### Логирование
Логирование корректной работы функции и возникающих ошибок реализовано в модулях **masks** и **utils**. Лог-файлы создаются в директории **logs**.

### Команда проекта

- **Мария Жиганова** - Junior Backend Developer (Python)
- **Команда SkyPro**
